{
  "id": "373721b3-538c-4196-9c08-3765e540a233",
  "prevId": "ddafd392-9204-4ed6-b933-e33a1d300f6f",
  "version": "5",
  "dialect": "pg",
  "tables": {
    "account_workspaces": {
      "name": "account_workspaces",
      "schema": "",
      "columns": {
        "account_id": {
          "name": "account_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "workspace_id": {
          "name": "workspace_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "can_claim": {
          "name": "can_claim",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "can_create": {
          "name": "can_create",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "account_workspaces_account_id_accounts_id_fk": {
          "name": "account_workspaces_account_id_accounts_id_fk",
          "tableFrom": "account_workspaces",
          "tableTo": "accounts",
          "columnsFrom": [
            "account_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "account_workspaces_workspace_id_workspaces_id_fk": {
          "name": "account_workspaces_workspace_id_workspaces_id_fk",
          "tableFrom": "account_workspaces",
          "tableTo": "workspaces",
          "columnsFrom": [
            "workspace_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {
        "account_workspaces_account_id_workspace_id_pk": {
          "name": "account_workspaces_account_id_workspace_id_pk",
          "columns": [
            "account_id",
            "workspace_id"
          ]
        }
      },
      "uniqueConstraints": {}
    },
    "accounts": {
      "name": "accounts",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "level": {
          "name": "level",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'worker'"
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "api_key": {
          "name": "api_key",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "api_key_prefix": {
          "name": "api_key_prefix",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "github_id": {
          "name": "github_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "auth_type": {
          "name": "auth_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'api'"
        },
        "anthropic_api_key": {
          "name": "anthropic_api_key",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "max_cost_per_day": {
          "name": "max_cost_per_day",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "total_cost": {
          "name": "total_cost",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "oauth_token": {
          "name": "oauth_token",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "seat_id": {
          "name": "seat_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "max_concurrent_sessions": {
          "name": "max_concurrent_sessions",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "active_sessions": {
          "name": "active_sessions",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "max_concurrent_workers": {
          "name": "max_concurrent_workers",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 3
        },
        "total_tasks": {
          "name": "total_tasks",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "owner_id": {
          "name": "owner_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "accounts_api_key_idx": {
          "name": "accounts_api_key_idx",
          "columns": [
            "api_key"
          ],
          "isUnique": true
        },
        "accounts_github_id_idx": {
          "name": "accounts_github_id_idx",
          "columns": [
            "github_id"
          ],
          "isUnique": false
        },
        "accounts_auth_type_idx": {
          "name": "accounts_auth_type_idx",
          "columns": [
            "auth_type"
          ],
          "isUnique": false
        },
        "accounts_seat_id_idx": {
          "name": "accounts_seat_id_idx",
          "columns": [
            "seat_id"
          ],
          "isUnique": false
        },
        "accounts_owner_idx": {
          "name": "accounts_owner_idx",
          "columns": [
            "owner_id"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "accounts_owner_id_users_id_fk": {
          "name": "accounts_owner_id_users_id_fk",
          "tableFrom": "accounts",
          "tableTo": "users",
          "columnsFrom": [
            "owner_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "accounts_api_key_unique": {
          "name": "accounts_api_key_unique",
          "nullsNotDistinct": false,
          "columns": [
            "api_key"
          ]
        }
      }
    },
    "artifacts": {
      "name": "artifacts",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "worker_id": {
          "name": "worker_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "storage_key": {
          "name": "storage_key",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "artifacts_worker_idx": {
          "name": "artifacts_worker_idx",
          "columns": [
            "worker_id"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "artifacts_worker_id_workers_id_fk": {
          "name": "artifacts_worker_id_workers_id_fk",
          "tableFrom": "artifacts",
          "tableTo": "workers",
          "columnsFrom": [
            "worker_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    },
    "github_installations": {
      "name": "github_installations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "installation_id": {
          "name": "installation_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "account_type": {
          "name": "account_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "account_login": {
          "name": "account_login",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "account_id": {
          "name": "account_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "account_avatar_url": {
          "name": "account_avatar_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "access_token": {
          "name": "access_token",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "token_expires_at": {
          "name": "token_expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "permissions": {
          "name": "permissions",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "repository_selection": {
          "name": "repository_selection",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "suspended_at": {
          "name": "suspended_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "github_installations_installation_id_idx": {
          "name": "github_installations_installation_id_idx",
          "columns": [
            "installation_id"
          ],
          "isUnique": true
        },
        "github_installations_account_login_idx": {
          "name": "github_installations_account_login_idx",
          "columns": [
            "account_login"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "github_installations_installation_id_unique": {
          "name": "github_installations_installation_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "installation_id"
          ]
        }
      }
    },
    "github_repos": {
      "name": "github_repos",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "installation_id": {
          "name": "installation_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "repo_id": {
          "name": "repo_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "full_name": {
          "name": "full_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "owner": {
          "name": "owner",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "private": {
          "name": "private",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "default_branch": {
          "name": "default_branch",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'main'"
        },
        "html_url": {
          "name": "html_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "github_repos_installation_idx": {
          "name": "github_repos_installation_idx",
          "columns": [
            "installation_id"
          ],
          "isUnique": false
        },
        "github_repos_repo_id_idx": {
          "name": "github_repos_repo_id_idx",
          "columns": [
            "repo_id"
          ],
          "isUnique": true
        },
        "github_repos_full_name_idx": {
          "name": "github_repos_full_name_idx",
          "columns": [
            "full_name"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "github_repos_installation_id_github_installations_id_fk": {
          "name": "github_repos_installation_id_github_installations_id_fk",
          "tableFrom": "github_repos",
          "tableTo": "github_installations",
          "columnsFrom": [
            "installation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    },
    "observations": {
      "name": "observations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "workspace_id": {
          "name": "workspace_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "worker_id": {
          "name": "worker_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "task_id": {
          "name": "task_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "files": {
          "name": "files",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'[]'::jsonb"
        },
        "concepts": {
          "name": "concepts",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'[]'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "observations_workspace_idx": {
          "name": "observations_workspace_idx",
          "columns": [
            "workspace_id"
          ],
          "isUnique": false
        },
        "observations_type_idx": {
          "name": "observations_type_idx",
          "columns": [
            "type"
          ],
          "isUnique": false
        },
        "observations_worker_idx": {
          "name": "observations_worker_idx",
          "columns": [
            "worker_id"
          ],
          "isUnique": false
        },
        "observations_task_idx": {
          "name": "observations_task_idx",
          "columns": [
            "task_id"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "observations_workspace_id_workspaces_id_fk": {
          "name": "observations_workspace_id_workspaces_id_fk",
          "tableFrom": "observations",
          "tableTo": "workspaces",
          "columnsFrom": [
            "workspace_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "observations_worker_id_workers_id_fk": {
          "name": "observations_worker_id_workers_id_fk",
          "tableFrom": "observations",
          "tableTo": "workers",
          "columnsFrom": [
            "worker_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "observations_task_id_tasks_id_fk": {
          "name": "observations_task_id_tasks_id_fk",
          "tableFrom": "observations",
          "tableTo": "tasks",
          "columnsFrom": [
            "task_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    },
    "sources": {
      "name": "sources",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "workspace_id": {
          "name": "workspace_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "config": {
          "name": "config",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "sources_workspace_idx": {
          "name": "sources_workspace_idx",
          "columns": [
            "workspace_id"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "sources_workspace_id_workspaces_id_fk": {
          "name": "sources_workspace_id_workspaces_id_fk",
          "tableFrom": "sources",
          "tableTo": "workspaces",
          "columnsFrom": [
            "workspace_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    },
    "tasks": {
      "name": "tasks",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "workspace_id": {
          "name": "workspace_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "source_id": {
          "name": "source_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "external_id": {
          "name": "external_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "external_url": {
          "name": "external_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "context": {
          "name": "context",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "priority": {
          "name": "priority",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "mode": {
          "name": "mode",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'execution'"
        },
        "runner_preference": {
          "name": "runner_preference",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'any'"
        },
        "required_capabilities": {
          "name": "required_capabilities",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'[]'::jsonb"
        },
        "claimed_by": {
          "name": "claimed_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "claimed_at": {
          "name": "claimed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_by_account_id": {
          "name": "created_by_account_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_by_worker_id": {
          "name": "created_by_worker_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "creation_source": {
          "name": "creation_source",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'api'"
        },
        "parent_task_id": {
          "name": "parent_task_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "result": {
          "name": "result",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "tasks_workspace_idx": {
          "name": "tasks_workspace_idx",
          "columns": [
            "workspace_id"
          ],
          "isUnique": false
        },
        "tasks_status_idx": {
          "name": "tasks_status_idx",
          "columns": [
            "status"
          ],
          "isUnique": false
        },
        "tasks_claimed_by_idx": {
          "name": "tasks_claimed_by_idx",
          "columns": [
            "claimed_by"
          ],
          "isUnique": false
        },
        "tasks_runner_pref_idx": {
          "name": "tasks_runner_pref_idx",
          "columns": [
            "runner_preference"
          ],
          "isUnique": false
        },
        "tasks_mode_idx": {
          "name": "tasks_mode_idx",
          "columns": [
            "mode"
          ],
          "isUnique": false
        },
        "tasks_source_external_idx": {
          "name": "tasks_source_external_idx",
          "columns": [
            "source_id",
            "external_id"
          ],
          "isUnique": true
        },
        "tasks_created_by_account_idx": {
          "name": "tasks_created_by_account_idx",
          "columns": [
            "created_by_account_id"
          ],
          "isUnique": false
        },
        "tasks_parent_task_idx": {
          "name": "tasks_parent_task_idx",
          "columns": [
            "parent_task_id"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "tasks_workspace_id_workspaces_id_fk": {
          "name": "tasks_workspace_id_workspaces_id_fk",
          "tableFrom": "tasks",
          "tableTo": "workspaces",
          "columnsFrom": [
            "workspace_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "tasks_source_id_sources_id_fk": {
          "name": "tasks_source_id_sources_id_fk",
          "tableFrom": "tasks",
          "tableTo": "sources",
          "columnsFrom": [
            "source_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "tasks_claimed_by_accounts_id_fk": {
          "name": "tasks_claimed_by_accounts_id_fk",
          "tableFrom": "tasks",
          "tableTo": "accounts",
          "columnsFrom": [
            "claimed_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "tasks_created_by_account_id_accounts_id_fk": {
          "name": "tasks_created_by_account_id_accounts_id_fk",
          "tableFrom": "tasks",
          "tableTo": "accounts",
          "columnsFrom": [
            "created_by_account_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    },
    "users": {
      "name": "users",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "google_id": {
          "name": "google_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "github_id": {
          "name": "github_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "image": {
          "name": "image",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "users_google_id_idx": {
          "name": "users_google_id_idx",
          "columns": [
            "google_id"
          ],
          "isUnique": true
        },
        "users_github_id_idx": {
          "name": "users_github_id_idx",
          "columns": [
            "github_id"
          ],
          "isUnique": true
        },
        "users_email_idx": {
          "name": "users_email_idx",
          "columns": [
            "email"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "users_google_id_unique": {
          "name": "users_google_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "google_id"
          ]
        },
        "users_github_id_unique": {
          "name": "users_github_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "github_id"
          ]
        }
      }
    },
    "worker_heartbeats": {
      "name": "worker_heartbeats",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "account_id": {
          "name": "account_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "local_ui_url": {
          "name": "local_ui_url",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "viewer_token": {
          "name": "viewer_token",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "workspace_ids": {
          "name": "workspace_ids",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'[]'::jsonb"
        },
        "max_concurrent_workers": {
          "name": "max_concurrent_workers",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 3
        },
        "active_worker_count": {
          "name": "active_worker_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "last_heartbeat_at": {
          "name": "last_heartbeat_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "worker_heartbeats_account_idx": {
          "name": "worker_heartbeats_account_idx",
          "columns": [
            "account_id"
          ],
          "isUnique": false
        },
        "worker_heartbeats_local_ui_url_idx": {
          "name": "worker_heartbeats_local_ui_url_idx",
          "columns": [
            "account_id",
            "local_ui_url"
          ],
          "isUnique": true
        },
        "worker_heartbeats_heartbeat_idx": {
          "name": "worker_heartbeats_heartbeat_idx",
          "columns": [
            "last_heartbeat_at"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "worker_heartbeats_account_id_accounts_id_fk": {
          "name": "worker_heartbeats_account_id_accounts_id_fk",
          "tableFrom": "worker_heartbeats",
          "tableTo": "accounts",
          "columnsFrom": [
            "account_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    },
    "workers": {
      "name": "workers",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "task_id": {
          "name": "task_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "workspace_id": {
          "name": "workspace_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "account_id": {
          "name": "account_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "runner": {
          "name": "runner",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "branch": {
          "name": "branch",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'idle'"
        },
        "waiting_for": {
          "name": "waiting_for",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "cost_usd": {
          "name": "cost_usd",
          "type": "numeric(10, 6)",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "input_tokens": {
          "name": "input_tokens",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "output_tokens": {
          "name": "output_tokens",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "turns": {
          "name": "turns",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "completed_at": {
          "name": "completed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "error": {
          "name": "error",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "local_ui_url": {
          "name": "local_ui_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "current_action": {
          "name": "current_action",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "milestones": {
          "name": "milestones",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'[]'::jsonb"
        },
        "pr_url": {
          "name": "pr_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "pr_number": {
          "name": "pr_number",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "last_commit_sha": {
          "name": "last_commit_sha",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "commit_count": {
          "name": "commit_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "files_changed": {
          "name": "files_changed",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "lines_added": {
          "name": "lines_added",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "lines_removed": {
          "name": "lines_removed",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "pending_instructions": {
          "name": "pending_instructions",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "instruction_history": {
          "name": "instruction_history",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'[]'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "workers_task_idx": {
          "name": "workers_task_idx",
          "columns": [
            "task_id"
          ],
          "isUnique": false
        },
        "workers_workspace_idx": {
          "name": "workers_workspace_idx",
          "columns": [
            "workspace_id"
          ],
          "isUnique": false
        },
        "workers_account_idx": {
          "name": "workers_account_idx",
          "columns": [
            "account_id"
          ],
          "isUnique": false
        },
        "workers_status_idx": {
          "name": "workers_status_idx",
          "columns": [
            "status"
          ],
          "isUnique": false
        },
        "workers_account_status_idx": {
          "name": "workers_account_status_idx",
          "columns": [
            "account_id",
            "status"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "workers_task_id_tasks_id_fk": {
          "name": "workers_task_id_tasks_id_fk",
          "tableFrom": "workers",
          "tableTo": "tasks",
          "columnsFrom": [
            "task_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "workers_workspace_id_workspaces_id_fk": {
          "name": "workers_workspace_id_workspaces_id_fk",
          "tableFrom": "workers",
          "tableTo": "workspaces",
          "columnsFrom": [
            "workspace_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "workers_account_id_accounts_id_fk": {
          "name": "workers_account_id_accounts_id_fk",
          "tableFrom": "workers",
          "tableTo": "accounts",
          "columnsFrom": [
            "account_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    },
    "workspaces": {
      "name": "workspaces",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "repo": {
          "name": "repo",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "local_path": {
          "name": "local_path",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "memory": {
          "name": "memory",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "github_repo_id": {
          "name": "github_repo_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "github_installation_id": {
          "name": "github_installation_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "access_mode": {
          "name": "access_mode",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'open'"
        },
        "git_config": {
          "name": "git_config",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "config_status": {
          "name": "config_status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'unconfigured'"
        },
        "webhook_config": {
          "name": "webhook_config",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "owner_id": {
          "name": "owner_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "workspaces_github_repo_idx": {
          "name": "workspaces_github_repo_idx",
          "columns": [
            "github_repo_id"
          ],
          "isUnique": false
        },
        "workspaces_github_installation_idx": {
          "name": "workspaces_github_installation_idx",
          "columns": [
            "github_installation_id"
          ],
          "isUnique": false
        },
        "workspaces_owner_idx": {
          "name": "workspaces_owner_idx",
          "columns": [
            "owner_id"
          ],
          "isUnique": false
        },
        "workspaces_config_status_idx": {
          "name": "workspaces_config_status_idx",
          "columns": [
            "config_status"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "workspaces_owner_id_users_id_fk": {
          "name": "workspaces_owner_id_users_id_fk",
          "tableFrom": "workspaces",
          "tableTo": "users",
          "columnsFrom": [
            "owner_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    }
  },
  "enums": {},
  "schemas": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}